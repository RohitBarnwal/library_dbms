# Generated by Django 5.0.7 on 2024-07-25 10:00

from django.db import migrations

def populate_data(apps, schema_editor):
    Member = apps.get_model('library', 'Member')
    Staff = apps.get_model('library', 'Staff')
    Publisher = apps.get_model('library', 'Publisher')
    Author = apps.get_model('library', 'Author')
    Book = apps.get_model('library', 'Book')
    BookAuthor = apps.get_model('library', 'BookAuthor')
    Loan = apps.get_model('library', 'Loan')
    LoanDetail = apps.get_model('library', 'LoanDetail')

    # Create Members
    member1 = Member.objects.create(name='John Doe', address='123 Main St', phone='555-1234', email='john.doe@example.com', membership_date='2023-01-15')
    member2 = Member.objects.create(name='Jane Smith', address='456 Oak Ave', phone='555-5678', email='jane.smith@example.com', membership_date='2023-02-20')

    # Create Staff
    staff1 = Staff.objects.create(name='Alice Johnson', role='Librarian', phone='555-8765', email='alice.j@example.com')
    staff2 = Staff.objects.create(name='Bob Williams', role='Assistant', phone='555-4321', email='bob.w@example.com')

    # Create Publishers
    publisher1 = Publisher.objects.create(name='Penguin Books', address='1745 Broadway, New York, NY 10019', contact_number='212-782-9000')
    publisher2 = Publisher.objects.create(name='HarperCollins', address='195 Broadway, New York, NY 10007', contact_number='212-207-7000')

    # Create Authors
    author1 = Author.objects.create(name='George Orwell', biography='English novelist, essayist, journalist and critic.', nationality='British')
    author2 = Author.objects.create(name='J.K. Rowling', biography='British author, best known for the Harry Potter series.', nationality='British')
    author3 = Author.objects.create(name='J.R.R. Tolkien', biography='English writer, poet, philologist, and academic.', nationality='British')


    # Create Books
    book1 = Book.objects.create(title='1984', isbn='9780451524935', year_published=1949, category='Dystopian', price=9.99, publisher=publisher1)
    book2 = Book.objects.create(title='Harry Potter and the Sorcerer\'s Stone', isbn='9780590353427', year_published=1997, category='Fantasy', price=12.99, publisher=publisher2)
    book3 = Book.objects.create(title='The Hobbit', isbn='9780618260300', year_published=1937, category='Fantasy', price=10.50, publisher=publisher1)

    # Create Book-Author relationships
    BookAuthor.objects.create(book=book1, author=author1)
    BookAuthor.objects.create(book=book2, author=author2)
    BookAuthor.objects.create(book=book3, author=author3)

    # Create Loans
    loan1 = Loan.objects.create(member=member1, staff=staff1, issue_date='2024-07-01', due_date='2024-07-15')
    loan2 = Loan.objects.create(member=member2, staff=staff2, issue_date='2024-07-10', due_date='2024-07-24')

    # Create Loan-Book details
    LoanDetail.objects.create(loan=loan1, book=book1)
    LoanDetail.objects.create(loan=loan1, book=book2)
    LoanDetail.objects.create(loan=loan2, book=book3)

class Migration(migrations.Migration):

    dependencies = [
        ('library', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(populate_data),
    ]