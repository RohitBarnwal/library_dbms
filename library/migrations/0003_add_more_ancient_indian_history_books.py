# Generated by Django 5.0.7 on 2024-07-25 10:00

from1 django.db import migrations

def populate_data(apps, schema_editor):
    Publisher = apps.get_model('library', 'Publisher')
    Author = apps.get_model('library', 'Author')
    Book = apps.get_model('library', 'Book')
    BookAuthor = apps.get_model('library', 'BookAuthor')

    # Get existing publisher
    penguin_books = Publisher.objects.get(name='Penguin Books')

    # Create new authors
    amartya_sen = Author.objects.create(name='Amartya Sen', biography='Indian economist and philosopher.', nationality='Indian')
    jawaharlal_nehru = Author.objects.create(name='Jawaharlal Nehru', biography='First Prime Minister of India.', nationality='Indian')

    # Create new books
    book1 = Book.objects.create(title='The Argumentative Indian', isbn='9780141012112', year_published=2005, category='History', price=14.99, publisher=penguin_books)
    book2 = Book.objects.create(title='Discovery of India', isbn='9780143031031', year_published=1946, category='History', price=18.99, publisher=penguin_books)

    # Create book-author relationships
    BookAuthor.objects.create(book=book1, author=amartya_sen)
    BookAuthor.objects.create(book=book2, author=jawaharlal_nehru)

class Migration(migrations.Migration):

    dependencies = [
        ('library', '0002_populate_data'),
    ]

    operations = [
        migrations.RunPython(populate_data),
    ]
